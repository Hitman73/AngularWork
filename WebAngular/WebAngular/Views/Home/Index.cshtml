<div ng-controller="myCtrl">
    @*Выбор языка*@
    <div class="row">
        <div class="col-md-2 col-md-offset-10">
            <select ng-change="translate()" ng-model="selectedLanguage" class="form-control selcls">
                <option value="en">English</option>
                <option value="ru">Русский</option>
            </select>
        </div>
    </div>

    <div class="row jumbotron">
        <h1 class="text-center">Тестовое задание</h1>
    </div>
    @*Сброс фильтра*@
    <div class="row">
        <div class="col-md-2 col-md-offset-10">
            <button type="button" class="btn btn-default" ng-click="resetFilter()">Сбросить фильтр</button>
        </div>
    </div>
    <form name="filterForm" ng-model="filterForm">
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>
                        <a href="#" ng-click="sortColumn('Id')" ng-class="{blackColumn  : !isSortColumn('Id'), blueColumn: isSortColumn('Id')}">№</a>
                        <span ng-show="my_filter.sortType == 'Id' && !my_filter.sortReverse" class="fa-caret-down"></span>
                        <span ng-show="my_filter.sortType == 'Id' && my_filter.sortReverse" class="fa-caret-up"></span>
                    </th>
                    <th>
                        <a href="#" ng-click="sortColumn('Country')" ng-class="{blackColumn  : !isSortColumn('Country'), blueColumn: isSortColumn('Country')}">{{translation.COUNTRY}}</a>
                        <span ng-show="my_filter.sortType == 'Country' && !my_filter.sortReverse" class="fa-caret-down"></span>
                        <span ng-show="my_filter.sortType == 'Country' &&my_filter. sortReverse" class="fa-caret-up"></span>
                    </th>
                    <th>
                        <a href="#" ng-click="sortColumn('City')" ng-class="{blackColumn  : !isSortColumn('City'), blueColumn: isSortColumn('City')}">{{translation.CITY}}</a>
                        <span ng-show="my_filter.sortType == 'City' && !my_filter.sortReverse" class="fa-caret-down"></span>
                        <span ng-show="my_filter.sortType == 'City' && my_filter.sortReverse" class="fa-caret-up"></span>
                    </th>
                    <th>
                        <a href="#" ng-click="sortColumn('Srtreet')" ng-class="{blackColumn  : !isSortColumn('Srtreet'), blueColumn: isSortColumn('Srtreet')}">{{translation.STREET}}</a>
                        <span ng-show="my_filter.sortType == 'Srtreet' && !my_filter.sortReverse" class="fa-caret-down"></span>
                        <span ng-show="my_filter.sortType == 'Srtreet' && my_filter.sortReverse" class="fa-caret-up"></span>
                    </th>
                    <th>
                        <a href="#" ng-click="sortColumn('Num')" ng-class="{blackColumn  : !isSortColumn('Num'), blueColumn: isSortColumn('Num')}">{{translation.HOUSE}}</a>
                        <span ng-show="my_filter.sortType == 'Num' && !my_filter.sortReverse" class="fa-caret-down"></span>
                        <span ng-show="my_filter.sortType == 'Num' && my_filter.sortReverse" class="fa-caret-up"></span>
                    </th>
                    <th>
                        <a href="#" ng-click="sortColumn('Index')" ng-class="{blackColumn  : !isSortColumn('Index'), blueColumn: isSortColumn('Index')}">{{translation.INDEX}}</a>
                        <span ng-show="sortType == 'Index' && !my_filter.sortReverse" class="fa-caret-down"></span>
                        <span ng-show="sortType == 'Index' && my_filter.sortReverse" class="fa-caret-up"></span>
                    </th>
                    <th>
                        <a href="#" ng-click="sortColumn('Date')" ng-class="{blackColumn  : !isSortColumn('Date'), blueColumn: isSortColumn('Date')}">{{translation.DATE}}</a>
                        <span ng-show="my_filter.sortType == 'Date' && !my_filter.sortReverse" class="fa-caret-down"></span>
                        <span ng-show="my_filter.sortType == 'Date' && my_filter.sortReverse" class="fa-caret-up"></span>
                    </th>
                </tr>

            </thead>
            <tbody>

                <tr>
                    <th><a class='btn btn-default' href='#' ng-click="filter()" ng-show="filterForm.$valid"><img src="~/App/image/filte.png" /></a></th>
                    <th><input type="text" class="form-control" ng-model="my_filter.f_country" maxlength="20" ng-pattern="/^[а-я,А-Я,a-z,A-Z]{0,20}$/" \></th>
                    <th><input type="text" class="form-control" ng-model="my_filter.f_city" maxlength="20" ng-pattern="/^[а-я,А-Я,a-z,A-Z]{0,20}$/"></th>
                    <th><input type="text" class="form-control" ng-model="my_filter.f_street" maxlength="20" ng-pattern="/^[а-я,А-Я,a-z,A-Z, ,/,.]{0,20}$/" \></th>
                    <th><input type="text" class="form-control" ng-model="my_filter.f_house" ng-click="sliderDialog()" maxlength="7" ng-pattern="/^\d{1,3}-\d{1,3}$/" \></th>
                    <th><input type="text" class="form-control" maxlength="6" ng-model="my_filter.f_index" ng-pattern="/^\d{6}$/"></th>
                    <th><input type="text" class="form-control " ng-model="my_filter.f_date" id="daterange" ng-pattern="/^\d\d/\d\d/\d\d\d\d \d\d:\d\d (AM|PM) - \d\d/\d\d/\d\d\d\d \d\d:\d\d (AM|PM)$/" /></th>
                </tr>
                <tr ng-repeat="adr in ListAddress">
                    @*Формируем стороки для вывода данных*@
                    <td>{{adr.Id}}</td>
                    <td>{{adr.Country}}</td>
                    <td>{{adr.City}}</td>
                    <td>{{adr.Street}}</td>
                    <td>{{adr.Number}}</td>
                    <td>{{adr.Index}}</td>
                    <td>{{adr.Date.substring(6,19) | date: 'medium'}}</td>
                </tr>
                <tr>
                    <td colspan="6" align="center">
                        <div class="pagination-wrap">
                            <ul class="pagination">
                                <li ng-repeat="page in paginationList" ng-click="showPage(page.link)" ng-class="{'active': currentPageNum() == page.link}"><a ng-bind-html="page.name">tr</a></li>
                            </ul>
                        </div>
                    </td>
                    <td></td>
                </tr>
            </tbody>
        </table>
    </form>
    <pop-up-dialog></pop-up-dialog>
</div>



<script src="~/Scripts/angular.min.js"></script>
<script src="~/Scripts/angular-resource.min.js"></script>

<script type="text/javascript">
    var adrApp = angular.module('adrApp', ['angularRangeSlider', 'ngResource']);

    $('#daterange').on('apply.daterangepicker', function (ev, picker) {
        var startDate = picker.startDate.format('YYYY-MM-DD H:mm');
        var endDate = picker.endDate.format('YYYY-MM-DD H:mm');

        var sc = angular.element(document.querySelector('div[ng-controller="myCtrl"]')).scope();
        sc.setDate(startDate, endDate);
    });
</script>

<script src="~/App/js/TranslationService.js"></script>
<script src="~/App/js/lib/daterangepicker.js"></script>
<script src="~/App/js/popUpDialogDirective.js"></script>
<script src="~/App/js/paginationFactory.js"></script>
<script src="~/Controllers/addressController.js"></script>
<script src="~/App/js/initDateRangePicker.js"></script>

<!-- Include  Range Slider -->
<script src="~/App/js/lib/angular-range-slider.min.js"></script>


